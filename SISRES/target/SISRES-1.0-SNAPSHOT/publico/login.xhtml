<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>SISRES</title>
        <meta name="google-signin-scope" content="profile email"/>
        <meta name="google-signin-client_id" content="648373580314-tk04f76nc7ickcn53ma6dln763vji45f.apps.googleusercontent.com" />
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css"></link>
        <script src="https://apis.google.com/js/platform.js" async="defer" ></script>
        <script src="https://apis.google.com/js/api:client.js"></script>
        <!--<script src="http://localhost:8080/SISRES/javascript/logingoogle.js"></script>-->
        <script>
            function onSignIn(googleUser) {
                var profile = googleUser.getBasicProfile();
                console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
                console.log('Name: ' + profile.getName());
                console.log('Image URL: ' + profile.getImageUrl());
                console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.

                var id_token = googleUser.getAuthResponse().id_token;

                alert(id_token);

                login([{name: 'idToken', value: id_token}]);
            }

        </script>
    </h:head>
    <body>
        <h:body>
            <h:form>  
                <p:growl id="messages" showDetail="false" autoUpdate="true" />
                <div class="g-signin2" onclick="login()" data-onsuccess="onSignIn"></div>
                <p:remoteCommand name="login" actionListener="#{googleSign.loginGoogle()}" />
                <p:commandButton action="cadastro?faces-redirect=true" immediate="true" value="Cadastre-se!" />
            </h:form> 
        </h:body>
    </body>
</html>
