<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:decorate xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

             template="../template.xhtml">
    <link type="text/css" rel="stylesheet" href="../css/stylesheet.css" />
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <h:form id="editar_atividade">
        <p:fieldset legend="#{requerimentoBean.requerimento.processo.nome}" style=" width: 990px;" > 
            <h:panelGrid id="panel_grid" columns="2" >

                <p:outputLabel value="Solicitante:" id="output_solicitante"/>
                <p:outputLabel value="#{requerimentoBean.requerimento.matriculaAluno}" for="output_solicitante"/>

                <p:outputLabel value="Atividade atual:" id="output_atividade_atual"/>
                <p:outputLabel value="#{requerimento.estadoAtual.atividadeModelo.nome}" for="output_atividade_atual"/>

                <p:outputLabel value="Observações:" id="output_descricao" />
                <p:inputTextarea rows="6" cols="33" value="#{requerimentoBean.atividade_atual.descricao_sucesso}"  />

                <p:outputLabel value="Anexar arquivo:" id="output_arquivo" />
                <p:fileUpload id="arquivo" label="Arquivo" mode="advanced" fileLimit="1" fileLimitMessage="selecione um único arquivo"
                              allowTypes="/(\.|\/)(pdf|mobi|epub)$/" invalidFileMessage="Apenas arquivos PDF"
                              sizeLimit="3145728" invalidSizeMessage="são permitidos arquivos de no máximo 3 MB"
                              dragDropSupport="true"/>
            </h:panelGrid>
            <div id="message_error">
                <br/>
                <div id="error" class="my-notify-error" >#{requerimentoBean.mensagem_erro}</div>
                <br/>
            </div>
            <script>
//                if(#{requerimentoBean.mensagem_erro})
//                {
//                    $("error").remove();
//                }
            </script>

            <p:commandButton value="Aprovar" process="@this" id="button_aprovar" action="#{requerimentoBean.aprovarAtividade()}"
                             ajax="false" title="Aprovar" icon="ui-icon-check" validateClient="editar_atividade"/>
            <p:commandButton value="Reprovar" process="@this" id="button_reprovar" action="#{requerimentoBean.reprovarAtividade()}"
                             ajax="false" title="Reprovar" icon="ui-icon-close" />

        </p:fieldset>
    </h:form>
</ui:decorate>